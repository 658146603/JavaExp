<!DOCTYPE html>
    <html>
    <head>
        <meta charset="UTF-8">
        <title><center>实验5 异常处理<center></title>
        
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Microsoft/vscode/extensions/markdown-language-features/media/markdown.css">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Microsoft/vscode/extensions/markdown-language-features/media/highlight.css">
        
        <style>
.task-list-item { list-style-type: none; } .task-list-item-checkbox { margin-left: -20px; vertical-align: middle; }
</style>
        <style>
            body {
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe WPC', 'Segoe UI', 'Ubuntu', 'Droid Sans', sans-serif;
                font-size: 14px;
                line-height: 1.6;
            }
        </style>
        
        
    </head>
    <body class="vscode-light">
        <h1 id="center%e5%ae%9e%e9%aa%8c5-%e5%bc%82%e5%b8%b8%e5%a4%84%e7%90%86center"><center>实验5 异常处理<center></h1>
<pre><code><div>班  级:     软工1805
学  号:     201806061219 
姓  名:     王程飞
完成日期:   2019.11.11
</div></code></pre>
<h4 id="1%e8%be%93%e5%85%a5%e4%b8%80%e4%b8%aa%e5%8a%a0%e6%b3%95%e8%a1%a8%e8%be%be%e5%bc%8f%e8%ae%a1%e7%ae%97%e8%a1%a8%e8%be%be%e5%bc%8f%e7%9a%84%e7%bb%93%e6%9e%9c%e8%a1%a8%e8%be%be%e5%bc%8f%e5%bd%a2%e5%bc%8f%e4%b8%ba12245%e5%a6%82%e6%9e%9c%e8%be%93%e5%85%a5%e6%a0%bc%e5%bc%8f%e9%94%99%e8%af%af%e5%b0%86%e4%ba%a7%e7%94%9f%e5%bc%82%e5%b8%b8%e6%8f%90%e7%a4%ba%e7%94%a8string%e7%b1%bb%e7%9a%84split%e6%96%b9%e6%b3%95%e5%88%86%e7%a6%bb%e5%87%ba%e5%8a%a0%e6%95%b0">1.输入一个加法表达式，计算表达式的结果。表达式形式为12+24+5，如果输入格式错误将产生异常。提示：用String类的split方法分离出加数。</h4>
<h4 id="%e4%bb%a3%e7%a0%81">代码</h4>
<pre><code class="language-java"><div>    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span> </span>{
        Scanner scanner = <span class="hljs-keyword">new</span> Scanner(System.in);
        <span class="hljs-keyword">while</span> (scanner.hasNextLine()) {
            String exp = scanner.nextLine();
            String[] items = exp.split(<span class="hljs-string">"\\+"</span>);
            <span class="hljs-keyword">int</span> sum = <span class="hljs-number">0</span>;
            <span class="hljs-keyword">try</span> {
                <span class="hljs-keyword">for</span> (String item : items) {
                    <span class="hljs-keyword">int</span> i = Integer.parseInt(item);
                    sum += i;
                }
                System.out.println(sum);
            } <span class="hljs-keyword">catch</span> (NumberFormatException e) {
                System.out.println(<span class="hljs-string">"格式错误"</span>);
            }
        }
    }
</div></code></pre>
<h4 id="%e7%bb%93%e6%9e%9c">结果</h4>
<pre><code><div>input: 1+2+3+4
10
input: 1-+2
格式错误
</div></code></pre>
<h4 id="2%e7%bc%96%e5%86%99%e4%b8%80%e4%b8%aa%e4%b8%89%e8%a7%92%e5%bd%a2%e7%b1%bbtriangle%e7%9a%84%e6%96%b9%e6%b3%95istriangle%e5%88%a4%e6%96%ad3%e4%b8%aa%e5%8f%82%e6%95%b0%e8%83%bd%e5%90%a6%e6%9e%84%e9%80%a0%e4%b8%89%e8%a7%92%e5%bd%a2%e5%a6%82%e6%9e%9c%e4%b8%89%e4%b8%aa%e5%8f%82%e6%95%b0%e8%83%bd%e6%9e%84%e6%88%90%e4%b8%89%e8%a7%92%e5%bd%a2%e5%88%99%e8%bf%94%e5%9b%9etrue%e5%a6%82%e6%9e%9c%e4%b8%89%e4%b8%aa%e5%8f%82%e6%95%b0%e4%b8%8d%e6%bb%a1%e8%b6%b3%e4%b8%89%e8%a7%92%e5%bd%a2%e7%9a%84%e6%9d%a1%e4%bb%b6%e5%88%99%e6%8a%9b%e5%87%ba%e5%bc%82%e5%b8%b8illegalargumentexception%e5%b9%b6%e6%89%93%e5%8d%b0%e8%be%93%e5%85%a5%e7%9a%84%e4%b8%89%e4%b8%aa%e5%8f%82%e6%95%b0%e4%b8%8d%e8%83%bd%e6%9e%84%e6%88%90%e4%b8%89%e8%a7%92%e5%bd%a2%e8%bf%94%e5%9b%9efalse%e6%9c%80%e5%90%8e%e7%94%a8main%e6%96%b9%e6%b3%95%e8%bf%9b%e8%a1%8c%e6%b5%8b%e8%af%95">2.编写一个三角形类Triangle的方法isTriangle()判断3个参数能否构造三角形，如果三个参数能构成三角形则返回true，如果三个参数不满足三角形的条件，则抛出异常IllegalArgumentException，并打印输入的三个参数不能构成三角形，返回false。最后用main方法进行测试。</h4>
<h4 id="%e4%bb%a3%e7%a0%81-1">代码</h4>
<pre><code class="language-java"><div><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">test02</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Triangle</span> </span>{
        Triangle(<span class="hljs-keyword">double</span> a, <span class="hljs-keyword">double</span> b, <span class="hljs-keyword">double</span> c) {
            <span class="hljs-keyword">if</span> (check(a, b, c)) {
                System.out.println(<span class="hljs-string">"可以构成三角形"</span>);
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> IllegalArgumentException(<span class="hljs-string">"不能构成三角形"</span>);
            }
        }
        <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">check</span><span class="hljs-params">(<span class="hljs-keyword">double</span> a, <span class="hljs-keyword">double</span> b, <span class="hljs-keyword">double</span> c)</span> </span>{
            <span class="hljs-keyword">return</span> !(a + b &lt;= c) &amp;&amp; !(a + c &lt;= b) &amp;&amp; !(b + c &lt;= a);
        }
    }
    <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">new</span> Triangle(<span class="hljs-number">10</span>, <span class="hljs-number">2.0</span>, <span class="hljs-number">3.0</span>);
    } <span class="hljs-keyword">catch</span> (IllegalArgumentException e) {
        System.out.println(<span class="hljs-string">"不能构成三角形"</span>);
    }
}
</div></code></pre>
<h4 id="%e7%bb%93%e6%9e%9c-1">结果</h4>
<pre><code><div>可以构成三角形
不能构成三角形
</div></code></pre>
<h4 id="3%e7%bc%96%e5%86%99%e4%b8%80%e4%b8%aa%e6%8a%bd%e8%b1%a1%e7%b1%bbshape%e5%b9%b6%e6%8f%90%e4%be%9b%e4%b8%80%e4%b8%aa%e6%8a%bd%e8%b1%a1%e7%9a%84%e6%96%b9%e6%b3%95getarea%e5%86%8d%e6%b4%be%e7%94%9f%e5%87%ba%e4%b8%89%e4%b8%aa%e5%ad%90%e7%b1%bb%e5%9c%86circle%e7%9f%a9%e5%bd%a2%e7%b1%bbrectangle%e5%92%8c%e4%b8%89%e8%a7%92%e5%bd%a2%e7%b1%bbtriangle%e9%87%8d%e5%86%99getarea%e6%96%b9%e6%b3%95%e7%84%b6%e5%90%8e%e7%bc%96%e5%86%99%e4%b8%80%e4%b8%aa%e6%b5%8b%e8%af%95%e7%a8%8b%e5%ba%8ftestshape%e6%a0%b9%e6%8d%ae%e7%94%a8%e6%88%b7%e8%be%93%e5%85%a5%e7%9a%84%e5%91%bd%e4%bb%a4%e8%a1%8c%e5%8f%82%e6%95%b0%e6%95%b0%e9%87%8f%e6%9d%a5%e8%ae%a1%e7%ae%97%e5%9c%86%e7%9f%a9%e5%bd%a2%e5%92%8c%e4%b8%89%e8%a7%92%e5%bd%a2%e7%9a%84%e9%9d%a2%e7%a7%af%e5%a6%82%e6%9e%9c%e8%be%93%e5%85%a5%e7%9a%84%e5%8f%82%e6%95%b0%e4%b8%ba1%e4%b8%aa2%e4%b8%aa3%e4%b8%aa%e5%88%86%e5%88%ab%e5%af%b9%e5%ba%94%e5%9c%86%e7%9f%a9%e5%bd%a2%e5%92%8c%e4%b8%89%e8%a7%92%e5%bd%a2%e5%a6%82%e6%9e%9c%e6%b2%a1%e6%9c%89%e5%8f%82%e6%95%b0%e6%88%96%e5%88%99%e5%8f%82%e6%95%b0%e9%94%99%e8%af%af%e5%88%99%e9%80%9a%e8%bf%87%e5%bc%82%e5%b8%b8%e5%a4%84%e7%90%86%e6%96%b9%e6%b3%95%e6%98%be%e7%a4%ba%e9%94%99%e8%af%af%e4%bf%a1%e6%81%af">3.编写一个抽象类Shape，并提供一个抽象的方法getArea()，再派生出三个子类圆Circle、矩形类Rectangle和三角形类Triangle重写getArea()方法。然后编写一个测试程序TestShape，根据用户输入的命令行参数数量来计算圆、矩形和三角形的面积。如果输入的参数为1个、2个、3个分别对应圆、矩形和三角形，如果没有参数或则参数错误，则通过异常处理方法显示错误信息。</h4>
<h4 id="%e4%bb%a3%e7%a0%81-2">代码</h4>
<pre><code class="language-java"><div><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">test03</span><span class="hljs-params">(String[] args)</span> </span>{
    <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">switch</span> (args.length) {
            <span class="hljs-keyword">case</span> <span class="hljs-number">1</span>:
                System.out.println(<span class="hljs-string">"圆形"</span>);
                System.out.println(<span class="hljs-keyword">new</span> Circle(args).getArea());
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> <span class="hljs-number">2</span>:
                System.out.println(<span class="hljs-string">"矩形"</span>);
                System.out.println(<span class="hljs-keyword">new</span> Rectangle(args).getArea());
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> <span class="hljs-number">3</span>:
                System.out.println(<span class="hljs-string">"三角形"</span>);
                System.out.println(<span class="hljs-keyword">new</span> Triangle(args).getArea());
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">default</span>:
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> IllegalArgumentException();
        }
    } <span class="hljs-keyword">catch</span> (Exception e) {
        System.out.println(<span class="hljs-string">"参数异常"</span>);
    }

}
<span class="hljs-keyword">abstract</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Shape</span> </span>{
    <span class="hljs-function"><span class="hljs-keyword">abstract</span> <span class="hljs-keyword">double</span> <span class="hljs-title">getArea</span><span class="hljs-params">()</span></span>;
}
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Circle</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Shape</span> </span>{
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">double</span> r;
    Circle(String[] args) {
        <span class="hljs-keyword">try</span> {
            r = Double.parseDouble(args[<span class="hljs-number">0</span>]);
        } <span class="hljs-keyword">catch</span> (NumberFormatException | ArrayIndexOutOfBoundsException e) {
            System.out.println(<span class="hljs-string">"args error"</span>);
        }
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">double</span> <span class="hljs-title">getArea</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">return</span> Math.PI*r;
    }
}
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Rectangle</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Shape</span> </span>{
    Rectangle(String[] args) {
        <span class="hljs-keyword">try</span> {
            a = Double.parseDouble(args[<span class="hljs-number">0</span>]);
            b = Double.parseDouble(args[<span class="hljs-number">1</span>]);
        } <span class="hljs-keyword">catch</span> (NumberFormatException | ArrayIndexOutOfBoundsException e) {
            System.out.println(<span class="hljs-string">"args error"</span>);
        }
    }
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">double</span> a,b;
    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">double</span> <span class="hljs-title">getArea</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">return</span> a*b;
    }
}
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Triangle</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Shape</span> </span>{
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">double</span> a, b, c;
    Triangle(String[] args) {
        <span class="hljs-keyword">try</span> {
            a = Double.parseDouble(args[<span class="hljs-number">0</span>]);
            b = Double.parseDouble(args[<span class="hljs-number">1</span>]);
            c = Double.parseDouble(args[<span class="hljs-number">2</span>]);
        } <span class="hljs-keyword">catch</span> (NumberFormatException | ArrayIndexOutOfBoundsException e) {
            System.out.println(<span class="hljs-string">"args error"</span>);
        }
    }
    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">double</span> <span class="hljs-title">getArea</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> IllegalArgumentException </span>{
        <span class="hljs-keyword">if</span> (check(a, b, c)) {
            <span class="hljs-keyword">double</span> p = (a+b+c)/<span class="hljs-number">2</span>;
            <span class="hljs-keyword">return</span> Math.sqrt(p*(p-a)*(p-b)*(p-c));
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> IllegalArgumentException();
        }
    }
    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">check</span><span class="hljs-params">(<span class="hljs-keyword">double</span> a, <span class="hljs-keyword">double</span> b, <span class="hljs-keyword">double</span> c)</span> </span>{
        <span class="hljs-keyword">return</span> !(a + b &lt;= c) &amp;&amp; !(a + c &lt;= b) &amp;&amp; !(b + c &lt;= a);
    }
}
</div></code></pre>
<h4 id="%e7%bb%93%e6%9e%9c-2">结果</h4>
<pre><code><div>-args: 1 2.5 3
三角形
1.1709371246996996

-args: 1 2.5
矩形
2.5

-args: 1
圆形
3.141592653589793

-args: 1 2 3 4
参数异常

-args: 1 2 3
三角形
参数异常
</div></code></pre>

    </body>
    </html>